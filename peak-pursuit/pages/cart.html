<!--#include virtual="/common/header.html"-->

<head>
    <title>Your Shopping Cart</title>
</head>

<div class="cart-container">
    <h2>Your Shopping Cart</h2>
    <div id="cart-items"></div>
    <p id="cart-total"></p>
    <button class="button clear-cart" id="clear-cart">Clear Cart</button>
    <button class="button checkout" id="checkout">Checkout</button>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const cartPageItems = document.getElementById('cart-items');
        const cartPageTotal = document.getElementById('cart-total');
        let cart = JSON.parse(sessionStorage.getItem('cart')) || {};

        const products = {
            '1': { title: "5-Person Tent", price: 99.99 },
            '2': { title: "50-Degree Sleeping Bag", price: 19.99 },
            '3': { title: "Camping Chair", price: 29.99 },
            '4': { title: "Quick-Select Adjustable Dumbbell", price: 99.99 },
            '5': { title: "Yoga Mat", price: 10.99 },
            '6': { title: "Resistance Bands", price: 8.99 },
            '7': { title: "Men's Moisture-Wicking T-Shirt", price: 9.99 },
            '8': { title: "Women's Compression Leggings", price: 26.99 },
            '9': { title: "Women's Running Shoes", price: 79.99 },
            '10': { title: "Stainless Steel Water Bottle", price: 13.99 },
            '11': { title: "Fitbit Charge 5 Fitness Tracker", price: 149.99 },
            '12': { title: "Gym Bag", price: 17.99 }
        };

        function updateCart() {
            cartPageItems.innerHTML = '';
            let total = 0;

            Object.keys(cart).forEach(productId => {
                const product = products[productId];
                const quantity = cart[productId];
                total += product.price * quantity;

                const cartPageItem = document.createElement('div');
                cartPageItem.classList.add('cart-item');
                cartPageItem.innerHTML = `<p>${product.title}</p>
                                          <p>Quantity: ${quantity}</p>
                                          <p>Price: $${(product.price * quantity).toFixed(2)}</p>`;
                cartPageItems.appendChild(cartPageItem);
            });

            cartPageTotal.textContent = `Total: $${total.toFixed(2)}`; // update total price display
        }

        document.getElementById('checkout').addEventListener('click', function () {
            alert('Please call 555-555-5555 to complete your order');
        });

        document.getElementById('clear-cart').addEventListener('click', function () {
            cart = {};
            sessionStorage.setItem('cart', JSON.stringify(cart)); // update sessionStorage with empty cart
            location.reload();
        });

        updateCart(); // display the cart items on page load

    });
</script>
</html>
